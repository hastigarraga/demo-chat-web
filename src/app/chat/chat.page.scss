:host { display:block; height:100dvh; overflow:hidden; --accountMenuW: 260px; }

.shell { height:100dvh; display:grid; grid-template-columns: 320px 1fr; background:#0b0d12; color:#e6e9f2; }
.shell.collapsed { grid-template-columns: 0 1fr; }

.shell > * { min-height:0; }

/* ===== Layout base ===== */
.sidebar { border-right:1px solid rgba(255,255,255,.06); background:rgba(255,255,255,.02); display:flex; flex-direction:column; position:relative; }
.main { display:flex; flex-direction:column; min-height:0; }

.sidebar-top { display:flex; align-items:center; gap:.75rem; padding:.85rem .9rem; border-bottom:1px solid rgba(255,255,255,.06); }
.brand-title { font-weight:700; letter-spacing:.2px; }
.actions { margin-left:auto; }

.btn-icon { width:36px; height:36px; border-radius:12px; border:1px solid rgba(255,255,255,.08); background:rgba(255,255,255,.04); color:#e6e9f2; cursor:pointer; }
.btn-icon:hover { background:rgba(255,255,255,.07); }

.btn-new { padding:.55rem .8rem; border-radius:12px; border:1px solid rgba(255,255,255,.10); background:rgba(255,255,255,.06); color:#e6e9f2; cursor:pointer; font-weight:600; }
.btn-new:hover { background:rgba(255,255,255,.10); }

.thread-list { padding:.65rem; overflow:auto; display:flex; flex-direction:column; gap:.45rem; min-height:0; }

.thread { position:relative; width:100%; display:flex; align-items:center; gap:.55rem; border-radius:14px; padding:.7rem .75rem; border:1px solid transparent; background:transparent; color:#e6e9f2; cursor:pointer; text-align:left; }
.thread:hover { background:rgba(255,255,255,.05); border-color:rgba(255,255,255,.06); }
.thread.active { background:rgba(255,255,255,.08); border-color:rgba(255,255,255,.10); }
.thread-title { flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; font-size:13px; opacity:.95; }

.btn-ellipsis { width:32px; height:32px; border-radius:12px; border:1px solid rgba(255,255,255,.08); background:rgba(255,255,255,.04); color:#e6e9f2; cursor:pointer; opacity:.85; display:flex; align-items:center; justify-content:center; }
.thread:hover .btn-ellipsis { opacity:1; }
.btn-ellipsis:hover { background:rgba(255,255,255,.09); }

/* ===== Context menu (fixed) ===== */
.ctx-menu { position:fixed; width:220px; background:#111420; border:1px solid rgba(255,255,255,.10); border-radius:14px; box-shadow:0 14px 40px rgba(0,0,0,.45); padding:.35rem; z-index:1000; }
.ctx-item { width:100%; text-align:left; padding:.65rem .75rem; border-radius:12px; border:none; background:transparent; color:#e6e9f2; cursor:pointer; }
.ctx-item:hover { background:rgba(255,255,255,.06); }
.ctx-sep { height:1px; background:rgba(255,255,255,.08); margin:.25rem .25rem; }
.ctx-item.danger { color:#ff6b6b; }

/* ===== Account ===== */
.sidebar-bottom { padding:.7rem .8rem; border-top:1px solid rgba(255,255,255,.06); position:relative; }
.account { width:100%; display:flex; align-items:center; gap:.7rem; border-radius:14px; border:1px solid rgba(255,255,255,.06); background:rgba(255,255,255,.04); color:#e6e9f2; padding:.6rem .65rem; cursor:pointer; }
.account:hover { background:rgba(255,255,255,.07); }
.avatar { width:34px; height:34px; border-radius:999px; background:rgba(255,255,255,.10); display:flex; align-items:center; justify-content:center; font-weight:700; border:1px solid rgba(255,255,255,.10); }
.account-meta { flex:1; min-width:0; }
.account-name { font-size:13px; font-weight:650; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.account-email { font-size:12px; opacity:.75; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.chev { opacity:.7; }

.account-menu { position:absolute; left:.8rem; bottom:calc(100% + .6rem); width:var(--accountMenuW); background:#111420; border:1px solid rgba(255,255,255,.10); border-radius:14px; padding:.35rem; box-shadow:0 14px 40px rgba(0,0,0,.45); z-index:1000; }
.acc-item { width:100%; text-align:left; padding:.65rem .75rem; border-radius:12px; border:none; background:transparent; color:#e6e9f2; cursor:pointer; }
.acc-item:hover { background:rgba(255,255,255,.06); }

/* ===== Chat ===== */
.chat { display:flex; flex-direction:column; min-height:0; height:100%; }
.messages { flex:1; overflow:auto; padding:1.1rem 1rem; min-height:0; }
.msg { display:flex; margin-bottom:.85rem; }
.bubble { max-width:840px; border-radius:18px; padding:.9rem .95rem; border:1px solid rgba(255,255,255,.08); background:rgba(255,255,255,.03); }
.bubble.user { margin-left:auto; background:rgba(59,130,246,.16); border-color:rgba(59,130,246,.26); }
.meta { display:flex; gap:.6rem; align-items:center; font-size:11px; opacity:.75; margin-bottom:.25rem; }
.role { text-transform:capitalize; }
.time { opacity:.8; }
.text { line-height:1.35; white-space:pre-wrap; }

.composer { display:flex; gap:.7rem; padding:.85rem; border-top:1px solid rgba(255,255,255,.06); background:rgba(0,0,0,.12); }
.composer input { flex:1; border-radius:16px; padding:.8rem .95rem; border:1px solid rgba(255,255,255,.10); background:#0f1220; color:#e6e9f2; outline:none; }
.composer input::placeholder { color:rgba(230,233,242,.45); }
.btn-send { border-radius:16px; padding:.8rem 1.05rem; border:1px solid rgba(255,255,255,.10); background:rgba(255,255,255,.06); color:#e6e9f2; cursor:pointer; font-weight:650; }
.btn-send:hover { background:rgba(255,255,255,.10); }
.btn-send:disabled { opacity:.55; cursor:not-allowed; }
