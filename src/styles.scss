/* ===== Tema dark tipo ChatGPT, layout fijo ===== */
:root {
  --bg: #0b0f17;
  --bg-elev: #0e141b;
  --panel: #0f172a;
  --ink: #e5e7eb;
  --muted: #94a3b8;
  --border: rgba(148,163,184,.18);
  --primary: #0ea5e9;
  --danger: #ef4444;
  color-scheme: dark;
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0; min-height: 100vh;
  background: linear-gradient(180deg, #0b0f17 0%, #0a0e14 100%);
  color: var(--ink);
  font: 14px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
}

/* ===== Layout principal ===== */
.layout {
  display: grid;
  grid-template-columns: 250px 1fr;
  height: 100vh;
  overflow: hidden;
}

.sidebar {
  background: var(--panel);
  border-right: 1px solid var(--border);
  display: flex; flex-direction: column;
}
.sidebar__header {
  padding: 12px 14px;
  font-weight: 600; color: var(--ink);
  border-bottom: 1px solid var(--border);
}
.threads {
  padding: 8px; display: grid; gap: 6px; overflow: auto;
}
.thread {
  display: flex; gap: 8px; align-items: center;
  padding: 8px 10px; width: 100%;
  border: 1px solid var(--border);
  background: #0f172a;
  color: var(--ink);
  border-radius: 8px;
  cursor: pointer;
}
.thread:hover { border-color: #1f2937; }
.thread.is-active { outline: 1px solid #1f2937; background: #0f172a; }
.thread .dot { width: 8px; height: 8px; border-radius: 50%; background: var(--primary); display: inline-block; }
.thread .plus { display: inline-grid; place-items: center; width: 16px; height: 16px; border: 1px solid var(--border); border-radius: 4px; font-weight: 700; }

.sidebar__footer {
  margin-top: auto; padding: 8px; border-top: 1px solid var(--border);
}

/* ===== Main ===== */
.main { display: flex; flex-direction: column; min-width: 0; }
.topbar {
  height: 48px; display: flex; align-items: center; gap: 12px;
  padding: 0 16px; border-bottom: 1px solid var(--border);
  background: var(--bg-elev);
}
.topbar .brand { font-weight: 600; color: var(--ink); }

.content {
  min-height: 0; flex: 1 1 auto; display: flex; justify-content: center;
  padding: 12px; overflow: auto;
}

/* ===== Chat ===== */
.chat-wrap {
  width: 100%;
  max-width: 800px;
  display: flex; flex-direction: column; gap: 12px;
}

.chat-header h1 { font-size: 16px; margin: 8px 0 0 0; }
.chat-header .hint { color: var(--muted); font-size: 12px; }

.chat-list {
  background: rgba(2,6,23,.35);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 12px;
  min-height: 280px;
  max-height: calc(100vh - 220px);
  overflow: auto;
}

.msg { display: grid; grid-template-columns: 88px 1fr; gap: 10px; padding: 8px 0; }
.msg .msg-role { color: var(--muted); font-weight: 600; }
.msg .msg-bubble {
  background: #0f172a;
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 10px 12px;
  white-space: pre-wrap;
}

.msg.me .msg-role { color: var(--primary); }
.msg.me .msg-bubble { background: #0b1220; }

.state { padding: 8px; color: var(--muted); }
.state--error { color: #fca5a5; }

.composer {
  display: grid; gap: 8px;
}
.input {
  width: 100%;
  background: rgba(2,6,23,.35);
  color: var(--ink);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 10px 12px;
  resize: vertical;
  outline: none;
}
.input:focus {
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(14,165,233,.15);
}

.actions { display: flex; gap: 8px; }

.btn {
  height: 32px; padding: 0 12px; border-radius: 8px;
  border: 1px solid var(--border);
  background: #0f172a; color: var(--ink);
  cursor: pointer;
}
.btn:hover { border-color: #1f2937; }
.btn[disabled] { opacity: .6; cursor: not-allowed; }
.btn.primary { background: var(--primary); color: #001018; border-color: #0891b2; font-weight: 600; }
.btn.ghost { background: transparent; }

.spinner {
  width: 16px; height: 16px; border-radius: 50%;
  border: 2px solid #001018; border-top-color: transparent;
  display: inline-block; vertical-align: middle;
  animation: spin 0.8s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

.footer-error {
  color: #fca5a5; font-size: 12px;
}

/* typing dots */
.dots::after {
  content: '···'; animation: blink 1.2s infinite steps(1,end);
}
@keyframes blink {
  0%, 20% { opacity: 0; }
  50% { opacity: 1; }
  80%, 100% { opacity: 0; }
}

/* Accesibilidad foco visible en botones */
button:focus-visible {
  outline: 2px solid var(--primary);
  outline-offset: 2px;
}
